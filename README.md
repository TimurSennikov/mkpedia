# mkpedia: The Open-Source Encyclopedia

## Как запустить?

### Клонируйте текущий репозиторий на свой сервер

### Для начала сгенерируйте секретный ключ: задайте в .env ключу SECRET_KEY желанное значение.
### Чтоб сгенерировать ключ можете запустить этот простой код

```
import secrets
print(secrets.token_hex(16))
```

### Выполните setup.sh (с этим файлом рекомендуется ознакомиться, как и со всем репозиторием, но только если не в падлу ;))

### При первом запуске создастся база данных и вирутальное окружение python, в которое скачаются все нужные пакеты. При последующих запусках время, за которое они будут выполняться, сильно упадёт.
### Сразу после запуска зайдите на http://127.0.0.1:8000/admin/panel и смените пароль для root.


## Готово! У вас есть рабочая МКПедия!


## Для перешедших с 0.6 на 0.7: обновление
### В 0.7 я поменял достаточно много, в том числе и структуру бд и, думаю, вы хотите знать, как перейти с минимальной потерей данных.
### Огорчу вас: сохранить данные пользователей не получится. Всё, кроме них.
### Далее подразумевается то, что вы хотя бы раз запускали сервер.

### Для перехода копируйте schema.sql из директории update_tools в директорию mk, старый schema.sql сохраните!!!
### Теперь активируйте виртуальное окружение:
```
source venv/bin/activate
```
### И перейдите в директорию mk.
### Там выполните
```
flask --app app init_db
```
### Далее верните старый файл на место и вернитесь на директорию выше. Поздравляю! Обновление завершено.
